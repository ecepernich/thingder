{{extend 'layout.html'}}

<html>
   <h2>Welcome to Thingder!</h2>
    <br>
    <h3>Item posts</h3>
    <form action="showByCategory" method="post">
        <select id="category_name" name='filter1'>
            <option disabled selected>Category</option>
            <option>Car</option>
            <option>House</option>
            <option>Misc.</option>
            <input id="category_button" style="margin: 10px; height: 40px" type="submit" value="filter" disabled>
        </select>
    </form>
    <!--
    <table class="table">
        {{for row in rows:}}
        <tr>
            <td><a href="{{=URL('show',args=row.id)}}">{{=row.title}}</a></td>
            <td><a href="{{=URL('show_profile',args=row.created_by.id)}}">{{=row.created_by.first_name}}</a></td>
            <td>{{=row.created_on}}</td>
            <td>{{=row.interests}}</td>
            <td>{{=row.offers}}</td>

            {{if row.image:}}
            <td><img width="100px"
     src="{{=URL('download', args=row.image)}}" /></td>
        </tr>
        {{pass}}
        {{pass}}
    </table>
    -->
    <div class="container-fluid">
        <div class="row">
        {{for row in rows:}}
                <div class="col-md-3">
                    <div id="card">
                        <a href="{{=URL('show',args=row.id)}}">{{=row.title}}</a>
                        <p>Created by: <a href="{{=URL('show_profile',args=row.created_by.id)}}">{{=row.created_by.first_name}}</a></p>
                        <p>Created on: {{=row.created_on}}</p>
                        <p>Interested in: {{=row.interests}}</p>
                        <p>Offering: {{row.offers}}</p>
                        <img vertical-align="" width="100%" height="260px" src="{{=URL('download', args=row.image)}}"/>
                    </div>
                </div>
        {{pass}}
        </div>
    </div>
</html>

<script>
    // Input box is initially disabled if a category is not specified. When a category is chosen, remove the disabled property from input
    // so that the box is usable - Joseph Campuzano
    $(document).ready(function() {
        var e = document.getElementById("category_name")
        var input = document.getElementById("category_button")
        $(e).click(function() {
            if (e.selectedIndex > 0) {
                input.removeAttribute("disabled");
            }
        });
    });
</script>
