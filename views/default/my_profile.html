{{extend 'layout.html'}}
<div style="float:left;margin:auto;width:30%;">
<h1>{{=fname}} {{=lname}}</h1>
<h1></h1>
<a href="{{=URL('profile',args=auth.user.id)}}"><button>Edit Profile</button></a>
<h1></h1>
{{for info in infos:}}
{{if info.image:}}
        <tr>
            <td><img width="200px" height="200px"
     src="{{=URL('download', args=info.image)}}" /></td>
        </tr>
{{else:}}
        <tr>
            <td><img width="200px" height="200px"
     src="{{=URL('static', 'images/defaultprofile.png')}}" /></td>
        </tr>
        {{pass}}

            <h3></h3>
{{age=info.age}}
{{zip=info.zip_code}}
{{abtme=info.about_me}}
            <td>Your Age: {{if not age:}} You haven't entered your age yet. {{else:}}{{=info.age}}{{pass}}</td>
            <h3></h3>
            <td>Your Zip Code: {{if not zip:}}You haven't entered your zipcode yet.{{else:}}{{=info.zip_code}}{{pass}}</td>
            <h3></h3>
            <td>About You: {{if not abtme:}}You haven't entered your about me yet.{{else:}}{{=info.about_me}}{{pass}}</td>
            <h3></h3>
            
        {{pass}}


{{for rate in rates:}} 
{{userrating=rate.rating}}
User Rating: {{if userrating==0.0:}}You have no ratings yet.{{else:}}{{=rate.rating}}{{pass}}
{{pass}}
            
        {{pass}}
</div>
<style>
.table { 
color: #333;
background:white;
font-family: Helvetica, Arial, sans-serif; 
border-spacing: 0; 
}
td, th { 
border: 1px solid transparent; /* No more visible border */
height: 30px; 
transition: all 0.3s;  /* Simple transition for hover effect */
}

th {
background: #DFDFDF;  /* Darken header a bit */
font-weight: bold;
}

td {
background: #FAFAFA;
text-align: center;
}

/* Cells in even rows (2,4,6...) are one color */ 
tr:nth-child(even) td { background: #F1F1F1; }   

/* Cells in odd rows (1,3,5...) are another (excludes header cells)  */ 
tr:nth-child(odd) td { background: #FEFEFE; }  

tr:hover td { background: rgb(116,150,150); color:#fff } /* Hover cell effect! */
</style>
<div style="float:left;margin:auto;width:70%">
<h3>Recent Posts</h3>
 <table class="table" style="background: rgb(116,150,150);">
        {{for row in rows:}}
        <tr id={{row.id}}>
            <td><a href="{{=URL('show',args=row.id)}}">{{=row.title}}</a></td>
            <td>{{=row.created_on}}</td>
            <td>{{=row.interests}}</td>
            <td>{{=row.offers}}</td>
            {{if row.image:}}
            <td><img width="100px"
     src="{{=URL('download', args=row.image)}}" /></td>
            {{else:}}
            <td><img width="100px" alt=""></td>
            {{pass}}
             <td><a href="{{=URL('item',args=row.id)}}"><button style="width:110px;" class="btn btn-primary" >View Matches</button></a> <a href="{{=URL('edit_post',args=row.id)}}"><button style="width:100px;">Edit Post</button></a>   <button post_id="{{=row.id}}" style="width:100px;" class="btn btn-danger delete_post">Delete Post</button> </td>
         </tr>
        {{pass}}
     </table>
</div>
<script>
    $(document).ready(function() {
        $("button").click(function() {
            row = $(this);
            val = $(this).attr("post_id");
            $.ajax({
                method: "POST",
                url:'{{=URL('../delete_post')}}',
                data: {'post_id': val},
                success: function(data){
                    row.closest("tr").remove();
                    }
                });
            });
        });                
</script>
